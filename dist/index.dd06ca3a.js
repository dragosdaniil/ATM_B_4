function e(e,t){return(t-e)*Math.random()+e}function t(e,t,n){for(var o=[],a=(t-e)/(n-1),s=0;s<n;s++)o.push(e+a*s);return o}function n(e,t,n,o){return e.map((e=>o*(e-t)+n))}class o{constructor(e,t,n,a,s){this.coords=e,this.map=t,this.capacity=n,this.name=a,this.currentCapacity=0,this._display(s),this.color=s,this._create(),o.sectors[this.name]={sector:this}}_create(){o.sectors||(o.sectors={})}_display(e="#00FA00",t=1,n=2){this.poly=new google.maps.Polygon({map:this.map,paths:this.coords,strokeColor:e,strokeOpacity:t,strokeWeight:n,fillColor:e,fillOpacity:.3})}setMap(e){this.map=e,this.poly.setMap(e)}checkCapacity(){if(this.currentCapacity>=1.05*this.capacity){if(!document.getElementById("alert"+this.name)){let e=document.createElement("h3"),t=document.createTextNode(`${this.name} has reached maximum capacity!`);e.appendChild(t),e.setAttribute("id","alert"+this.name),e.setAttribute("class","alert"),e.style.color="red",e.style.backgroundColor=this.color,e.style.textAlign="center",e.style.margin="0",e.style.padding="0",document.querySelector(".alert-section").appendChild(e)}}else if(this.currentCapacity<1.05*this.capacity&&document.getElementById("alert"+this.name)){let e=document.getElementById("alert"+this.name);e.innerHTML="",e.remove()}}checkPosition(e){google.maps.geometry.poly.containsLocation(e.marker.getPosition(),this.poly)&&!e.sector&&e.changeSector(this.name)}}class a{constructor(e,t,n,o,a){this.step=o,this.map=n,this.id=((new Date).getTime()*Math.random()).toString(),this.heading=t,this.icon=a,this.sector=null,this._create(),this._separate(),this.createMarker(e)}changeSector(e){this.sector=e}_create(){a.counterUp||(a.counterUp=[]),a.counterDown||(a.counterDown=[])}_separate(){this.heading>270&&this.heading<360?a.counterUp.push(this):a.counterDown.push(this)}createMarker(e,t="None"){this.marker=new google.maps.Marker({position:e,map:this.map,title:t,icon:this.icon})}deleteFlight(){this.marker.setMap(null),this.heading>270&&this.heading<360?a.counterUp=a.counterUp.filter((e=>e.id!==this.id)):a.counterDown=a.counterDown.filter((e=>e.id!==this.id))}updatePos(){if(this.marker.position.lat()<44.55||this.marker.position.lat()>48.1||this.marker.position.lng()<21.2||this.marker.position.lng()>23.6)return clearTimeout(this.timeout),this.deleteFlight(),!0;{this.marker.setMap(null);let e=function(e,t,n,o){let a;return 0===n||180===n||360===n?(e+=Math.sign(Math.cos(n*Math.PI/180))*o,new google.maps.LatLng(e,t)):90===n||270===n?(t+=Math.sign(Math.sin(n*Math.PI/180))*o,new google.maps.LatLng(e,t)):(n<90?a=n:n<180?(a=n-90,e+=Math.sign(Math.cos(n*Math.PI/180))*o*Math.sin(a*Math.PI/180),t+=Math.sign(Math.sin(n*Math.PI/180))*o*Math.cos(a*Math.PI/180)):n<270?a=270-n:n<360&&(a=360-n,e+=Math.sign(Math.cos(n*Math.PI/180))*o*Math.cos(a*Math.PI/180),t+=Math.sign(Math.sin(n*Math.PI/180))*o*Math.sin(a*Math.PI/180)),new google.maps.LatLng(e,t))}(this.marker.position.lat(),this.marker.position.lng(),this.heading,this.step);this.createMarker(e),this.timeout=setTimeout((()=>this.updatePos()),1e3)}}}const s="#2980B9",i="#229954",g="#7D3C98",l="#F4D03F",r="#E67E22",c="#46EBEF",p=[new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(45.731944,22.498889),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(44.867222,22.8475),new google.maps.LatLng(44.652778,22.552778),new google.maps.LatLng(46.416667,21.294444)],m=[new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(45.731944,22.498889),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(45.5166,21.9365),new google.maps.LatLng(46.416667,21.294444)],h=[new google.maps.LatLng(45.5166,21.9365),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(44.867222,22.8475),new google.maps.LatLng(44.652778,22.552778)],u=[new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(46.493055,23.168889),new google.maps.LatLng(46.259167,23.508611),new google.maps.LatLng(45.960278,23.088056),new google.maps.LatLng(45.745,22.888333),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.731944,22.498888),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(48.016667,23.1)],L=[new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(47.04043,21.9983),new google.maps.LatLng(46.493055,23.168889),new google.maps.LatLng(46.259167,23.508611),new google.maps.LatLng(45.960278,23.088056),new google.maps.LatLng(45.745,22.888333),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.731944,22.498888)],d=[new google.maps.LatLng(47.04043,21.9983),new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(47.05145,23.14434),new google.maps.LatLng(46.493055,23.168889)],w=(new google.maps.LatLng(47.05145,23.14434),new google.maps.LatLng(47.20315,22.18192),new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(46.493055,23.168889),t(22.1,22.7,7)),M=t(22.65,23.45,7),y=n(w,22.1,47.5,.45),k=n(M,22.65,44.65,.45),P=[w,y],f=[M,k],C=t(290,350,10),E=t(120,170,10),U={url:"http://earth.google.com/images/kml-icons/track-directional/track-14.png",scaledSize:new google.maps.Size(30,30)},D={url:"http://earth.google.com/images/kml-icons/track-directional/track-6.png",scaledSize:new google.maps.Size(30,30)};let I,b,S,T,B=0,A=0,x=document.getElementById("MOPUG"),O=document.getElementById("BUDOP"),v=document.getElementById("UP"),q=document.getElementById("DOWN");const _=new google.maps.LatLng(46.493055,23.168889);window.init=void(T=new google.maps.Map(document.getElementById("map"),{zoom:7,center:_}));let F=new o(p,T,18,"MOPUG",i),z=new o(m,null,14,"MOPUG1",s),G=new o(h,null,14,"MOPUG2",l),N=new o(u,T,18,"BUDOP",g),W=new o(L,null,16,"BUDOP1",c),H=new o(d,null,16,"BUDOP2",r);function $(){let t=e(4e3,1e4),n=e(1,5);for(let t=0;t<n;t++){let t=Math.floor(e(0,f[0].length)),n=Math.floor(e(0,C.length)),o=new google.maps.LatLng(f[1][t],f[0][t]);new a(o,C[n],T,.1,U).updatePos()}v.textContent=a.counterUp.length,I=setTimeout($,t)}function j(){let t=e(4e3,1e4),n=e(1,5);for(let t=0;t<n;t++){let t=Math.floor(e(0,P[0].length)),n=Math.floor(e(0,E.length)),o=new google.maps.LatLng(P[1][t],P[0][t]);new a(o,E[n],T,.1,D).updatePos()}q.textContent=a.counterDown.length,b=setTimeout(j,t)}function J(){let e=0,t=0;var n;!function(){for(let e=0;e<a.counterUp.length;e++){let t=a.counterUp[e];z.checkPosition(t),G.checkPosition(t),W.checkPosition(t),H.checkPosition(t)}for(let e=0;e<a.counterDown.length;e++){let t=a.counterDown[e];z.checkPosition(t),G.checkPosition(t),W.checkPosition(t),H.checkPosition(t)}let n=[...a.counterUp,...a.counterDown];for(let o=0;o<n.length;o++)[z.name,G.name].includes(n[o].sector)?e+=1:[W.name,H.name].includes(n[o].sector)&&(t+=1)}(),(n=e)>F.capacity?(F.setMap(null),z.setMap(T),G.setMap(T),B=0):!F.map&&n<=F.capacity&&(B+=1),B>=5&&(F.setMap(T),z.setMap(null),G.setMap(null),B=0),function(e){e>N.capacity?(W.setMap(T),H.setMap(T),N.setMap(null),A=0):!N.map&&e<=N.capacity&&(A+=1),A>=5&&(N.setMap(T),W.setMap(null),H.setMap(null),A=0)}(t),F.currentCapacity=e,N.currentCapacity=t,x.textContent=F.currentCapacity,O.textContent=N.currentCapacity,F.checkCapacity(),N.checkCapacity(),S=setTimeout(J,1e3)}function K(e){$(),j(),J(),e.currentTarget.setAttribute("disabled","");const t=document.querySelector(".sim-stop");t.hasAttribute("disabled")&&t.removeAttribute("disabled")}document.querySelector(".sim-start").addEventListener("click",K),document.querySelector(".sim-stop").addEventListener("click",(function(e){clearTimeout(I),clearTimeout(b),clearTimeout(S),a.counterUp.forEach((e=>{e.marker.setMap(null),clearTimeout(e.timeout)})),a.counterDown.forEach((e=>{e.marker.setMap(null),clearTimeout(e.timeout)})),a.counterUp=[],a.counterDown=[],x.textContent=0,O.textContent=0,v.textContent=0,q.textContent=0,F.setMap(T),F.currentCapacity=0,z.setMap(null),G.setMap(null),N.setMap(T),N.currentCapacity=0,W.setMap(null),H.setMap(null),e.currentTarget.setAttribute("disabled","");const t=e.currentTarget.parentElement.querySelector(".sim-start");t.hasAttribute("disabled")&&t.removeAttribute("disabled");const n=document.querySelector(".alert-section");n.querySelectorAll(".alert").forEach((e=>{n.removeChild(e)}))})),document.querySelector(".start").addEventListener("click",(e=>{window.location.href="#sim-map",K(e),document.querySelector(".sim-start").setAttribute("disabled","")}));
//# sourceMappingURL=index.dd06ca3a.js.map
