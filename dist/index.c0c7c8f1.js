function e(e,t){return(t-e)*Math.random()+e}function t(e,t,o){for(var a=[],n=(t-e)/(o-1),s=0;s<o;s++)a.push(e+n*s);return a}function o(e,t,o,a){return e.map((e=>a*(e-t)+o))}class a{constructor(e,t,o,n,s){this.coords=e,this.map=t,this.capacity=o,this.name=n,this.currentCapacity=0,this._display(s),this.color=s,this._create(),a.sectors[this.name]={sector:this}}_create(){a.sectors||(a.sectors={})}_display(e="#00FA00",t=1,o=2){this.poly=new google.maps.Polygon({map:this.map,paths:this.coords,strokeColor:e,strokeOpacity:t,strokeWeight:o,fillColor:e,fillOpacity:.3})}setMap(e){this.map=e,this.poly.setMap(e)}checkCapacity(){if(this.currentCapacity>=1.05*this.capacity){if(!document.getElementById("alert"+this.name)){let e=document.createElement("h3"),t=document.createTextNode(`${this.name} has reached maximum capacity!`);e.appendChild(t),e.setAttribute("id","alert"+this.name),e.setAttribute("class","alert"),e.style.color="red",e.style.backgroundColor=this.color,e.style.textAlign="center",e.style.margin="0",e.style.padding="0",document.querySelector(".alert-section").appendChild(e)}}else if(this.currentCapacity<1.05*this.capacity&&document.getElementById("alert"+this.name)){let e=document.getElementById("alert"+this.name);e.innerHTML="",e.remove()}}checkPosition(e){google.maps.geometry.poly.containsLocation(e.marker.getPosition(),this.poly)&&!e.sector&&e.changeSector(this.name)}}class n{constructor(e,t,o,a,n){this.step=a,this.map=o,this.id=((new Date).getTime()*Math.random()).toString(),this.heading=t,this.icon=n,this.sector=null,this._create(),this._separate(),this.createMarker(e)}changeSector(e){this.sector=e}_create(){n.counterUp||(n.counterUp=[]),n.counterDown||(n.counterDown=[])}_separate(){this.heading>270&&this.heading<360?n.counterUp.push(this):n.counterDown.push(this)}createMarker(e,t="None"){this.marker=new google.maps.Marker({position:e,map:this.map,title:t,icon:this.icon})}deleteFlight(){this.marker.setMap(null),this.heading>270&&this.heading<360?n.counterUp=n.counterUp.filter((e=>e.id!==this.id)):n.counterDown=n.counterDown.filter((e=>e.id!==this.id))}updatePos(){if(this.marker.position.lat()<44.55||this.marker.position.lat()>48.1||this.marker.position.lng()<21.2||this.marker.position.lng()>23.6)return clearTimeout(this.timeout),this.deleteFlight(),!0;{this.marker.setMap(null);let e=function(e,t,o,a){let n;return 0===o||180===o||360===o?(e+=Math.sign(Math.cos(o*Math.PI/180))*a,new google.maps.LatLng(e,t)):90===o||270===o?(t+=Math.sign(Math.sin(o*Math.PI/180))*a,new google.maps.LatLng(e,t)):(o<90?n=o:o<180?(n=o-90,e+=Math.sign(Math.cos(o*Math.PI/180))*a*Math.sin(n*Math.PI/180),t+=Math.sign(Math.sin(o*Math.PI/180))*a*Math.cos(n*Math.PI/180)):o<270?n=270-o:o<360&&(n=360-o,e+=Math.sign(Math.cos(o*Math.PI/180))*a*Math.cos(n*Math.PI/180),t+=Math.sign(Math.sin(o*Math.PI/180))*a*Math.sin(n*Math.PI/180)),new google.maps.LatLng(e,t))}(this.marker.position.lat(),this.marker.position.lng(),this.heading,this.step);this.createMarker(e),this.timeout=setTimeout((()=>this.updatePos()),1e3)}}}const s="#2980B9",l="#229954",r="#7D3C98",i="#F4D03F",g="#E67E22",c="#46EBEF",p=[new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(45.731944,22.498889),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(44.867222,22.8475),new google.maps.LatLng(44.652778,22.552778),new google.maps.LatLng(46.416667,21.294444)],m=[new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(45.731944,22.498889),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(45.5166,21.9365),new google.maps.LatLng(46.416667,21.294444)],h=[new google.maps.LatLng(45.5166,21.9365),new google.maps.LatLng(45.415833,22.965278),new google.maps.LatLng(44.867222,22.8475),new google.maps.LatLng(44.652778,22.552778)],u=[new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(46.493055,23.168889),new google.maps.LatLng(46.259167,23.508611),new google.maps.LatLng(45.960278,23.088056),new google.maps.LatLng(45.745,22.888333),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.731944,22.498888),new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(48.016667,23.1)],L=[new google.maps.LatLng(46.212222,21.529167),new google.maps.LatLng(46.416667,21.294444),new google.maps.LatLng(47.04043,21.9983),new google.maps.LatLng(46.493055,23.168889),new google.maps.LatLng(46.259167,23.508611),new google.maps.LatLng(45.960278,23.088056),new google.maps.LatLng(45.745,22.888333),new google.maps.LatLng(45.544444,22.935278),new google.maps.LatLng(45.731944,22.498888)],y=[new google.maps.LatLng(47.04043,21.9983),new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(47.05145,23.14434),new google.maps.LatLng(46.493055,23.168889)],d=(new google.maps.LatLng(47.05145,23.14434),new google.maps.LatLng(47.20315,22.18192),new google.maps.LatLng(48.016667,23.1),new google.maps.LatLng(47.694444,23.160833),new google.maps.LatLng(47.491389,23.125),new google.maps.LatLng(46.493055,23.168889),t(22.1,22.7,7)),w=t(22.65,23.45,7),M=o(d,22.1,47.5,.45),f=o(w,22.65,44.65,.45),T=[d,M],k=[w,f],P=t(290,350,10),b=t(120,170,10),C={url:"http://earth.google.com/images/kml-icons/track-directional/track-14.png",scaledSize:new google.maps.Size(30,30)},x={url:"http://earth.google.com/images/kml-icons/track-directional/track-6.png",scaledSize:new google.maps.Size(30,30)};let E,U,D,I,S=0,B=0,A=document.getElementById("MOPUG"),v=document.getElementById("BUDOP"),O=document.getElementById("UP"),q=document.getElementById("DOWN");const _=new google.maps.LatLng(46.493055,23.168889);window.init=void(I=new google.maps.Map(document.getElementById("map"),{zoom:7,center:_,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}]}));let F=new a(p,I,18,"MOPUG",l),z=new a(m,null,14,"MOPUG1",s),G=new a(h,null,14,"MOPUG2",i),N=new a(u,I,18,"BUDOP",r),W=new a(L,null,16,"BUDOP1",c),H=new a(y,null,16,"BUDOP2",g);function $(){let t=e(4e3,1e4),o=e(1,5);for(let t=0;t<o;t++){let t=Math.floor(e(0,k[0].length)),o=Math.floor(e(0,P.length)),a=new google.maps.LatLng(k[1][t],k[0][t]);new n(a,P[o],I,.1,C).updatePos()}O.textContent=n.counterUp.length,E=setTimeout($,t)}function j(){let t=e(4e3,1e4),o=e(1,5);for(let t=0;t<o;t++){let t=Math.floor(e(0,T[0].length)),o=Math.floor(e(0,b.length)),a=new google.maps.LatLng(T[1][t],T[0][t]);new n(a,b[o],I,.1,x).updatePos()}q.textContent=n.counterDown.length,U=setTimeout(j,t)}function J(){let e=0,t=0;var o;!function(){for(let e=0;e<n.counterUp.length;e++){let t=n.counterUp[e];z.checkPosition(t),G.checkPosition(t),W.checkPosition(t),H.checkPosition(t)}for(let e=0;e<n.counterDown.length;e++){let t=n.counterDown[e];z.checkPosition(t),G.checkPosition(t),W.checkPosition(t),H.checkPosition(t)}let o=[...n.counterUp,...n.counterDown];for(let a=0;a<o.length;a++)[z.name,G.name].includes(o[a].sector)?e+=1:[W.name,H.name].includes(o[a].sector)&&(t+=1)}(),(o=e)>F.capacity?(F.setMap(null),z.setMap(I),G.setMap(I),S=0):!F.map&&o<=F.capacity&&(S+=1),S>=5&&(F.setMap(I),z.setMap(null),G.setMap(null),S=0),function(e){e>N.capacity?(W.setMap(I),H.setMap(I),N.setMap(null),B=0):!N.map&&e<=N.capacity&&(B+=1),B>=5&&(N.setMap(I),W.setMap(null),H.setMap(null),B=0)}(t),F.currentCapacity=e,N.currentCapacity=t,A.textContent=F.currentCapacity,v.textContent=N.currentCapacity,F.checkCapacity(),N.checkCapacity(),D=setTimeout(J,1e3)}function K(e){$(),j(),J(),e.currentTarget.setAttribute("disabled","");const t=document.querySelector(".sim-stop");t.hasAttribute("disabled")&&t.removeAttribute("disabled")}document.querySelector(".sim-start").addEventListener("click",K),document.querySelector(".sim-stop").addEventListener("click",(function(e){clearTimeout(E),clearTimeout(U),clearTimeout(D),n.counterUp.forEach((e=>{e.marker.setMap(null),clearTimeout(e.timeout)})),n.counterDown.forEach((e=>{e.marker.setMap(null),clearTimeout(e.timeout)})),n.counterUp=[],n.counterDown=[],A.textContent=0,v.textContent=0,O.textContent=0,q.textContent=0,F.setMap(I),F.currentCapacity=0,z.setMap(null),G.setMap(null),N.setMap(I),N.currentCapacity=0,W.setMap(null),H.setMap(null),e.currentTarget.setAttribute("disabled","");const t=e.currentTarget.parentElement.querySelector(".sim-start");t.hasAttribute("disabled")&&t.removeAttribute("disabled");const o=document.querySelector(".alert-section");o.querySelectorAll(".alert").forEach((e=>{o.removeChild(e)}))})),document.querySelector(".start").addEventListener("click",(e=>{window.location.href="#sim-map",K(e),document.querySelector(".sim-start").setAttribute("disabled","")}));
//# sourceMappingURL=index.c0c7c8f1.js.map
